<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CYBERSEARCH - Mesin Pencari Cyberpunk</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--primary-color: #00ffff;
--secondary-color: #ff00ff;
--accent-color: #00ff88;
--dark-bg: #0a0a0f;
--card-bg: rgba(15, 15, 30, 0.7);
--text-primary: #e0e0ff;
--text-secondary: #a0a0c0;
}

body {
font-family: 'Orbitron', 'Courier New', monospace;
background: var(--dark-bg);
color: var(--text-primary);
min-height: 100vh;
overflow-x: hidden;
position: relative;
}

/* Import Google Font */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap');

/* Animated Background - Enhanced */
.bg-animation {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: -1;
background: linear-gradient(135deg, #0a0a1f 0%, #1a0033 50%, #0a0a1f 100%);
overflow: hidden;
}

.particles {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
}

.particle {
position: absolute;
background: var(--primary-color);
border-radius: 50%;
opacity: 0.3;
animation: float 20s infinite linear;
}

.particle:nth-child(2n) {
background: var(--secondary-color);
}

.particle:nth-child(3n) {
background: var(--accent-color);
}

@keyframes float {
0% {
transform: translateY(100vh) translateX(0);
opacity: 0;
}
10% {
opacity: 0.3;
}
90% {
opacity: 0.3;
}
100% {
transform: translateY(-100vh) translateX(100px);
opacity: 0;
}
}

.grid-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-image: 
linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
background-size: 40px 40px;
animation: grid-move 10s linear infinite;
}

@keyframes grid-move {
0% {
transform: translate(0, 0);
}
100% {
transform: translate(40px, 40px);
}
}

/* Enhanced Glitch Effect */
@keyframes glitch {
0%, 100% {
text-shadow:
0.05em 0 0 rgba(255, 0, 0, 0.75),
-0.05em -0.025em 0 rgba(0, 255, 0, 0.75),
0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
}
15% {
text-shadow:
-0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
-0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
}
50% {
text-shadow:
0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
0.05em 0 0 rgba(0, 255, 0, 0.75),
0 -0.05em 0 rgba(0, 0, 255, 0.75);
}
}

/* Enhanced Neon Flicker */
@keyframes neon-flicker {
0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
opacity: 1;
text-shadow: 0 0 5px currentColor, 0 0 10px currentColor;
}
20%, 22%, 24%, 55% {
opacity: 0.5;
text-shadow: 0 0 2px currentColor;
}
}

/* Enhanced Scanline Effect */
@keyframes scanline {
0% {
transform: translateY(-100%);
}
100% {
transform: translateY(100%);
}
}

/* Pulse Animation */
@keyframes pulse {
0%, 100% {
opacity: 1;
transform: scale(1);
}
50% {
opacity: 0.7;
transform: scale(0.95);
}
}

/* Enhanced Glow Animation */
@keyframes glow {
0%, 100% {
box-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color);
}
50% {
box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
}
}

/* Main Container */
.container {
position: relative;
z-index: 10;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
min-height: 100vh;
padding: 20px;
}

/* Enhanced Header */
.header {
text-align: center;
margin-bottom: 48px;
position: relative;
}

.logo-container {
display: flex;
align-items: center;
justify-content: center;
gap: 16px;
margin-bottom: 24px;
position: relative;
}

.hexagon-bg {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 200px;
height: 200px;
background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, rgba(0, 255, 255, 0) 70%);
z-index: -1;
animation: pulse 4s infinite;
}

.icon {
width: 60px;
height: 60px;
position: relative;
}

.icon-cpu {
color: var(--primary-color);
animation: pulse 2s infinite;
filter: drop-shadow(0 0 10px var(--primary-color));
}

.icon-globe {
color: var(--secondary-color);
animation: pulse 2s infinite;
filter: drop-shadow(0 0 10px var(--secondary-color));
}

.icon-glow {
position: absolute;
inset: 0;
width: 60px;
height: 60px;
border-radius: 50%;
filter: blur(20px);
animation: pulse 2s infinite;
}

.cpu-glow {
background: rgba(0, 255, 255, 0.3);
}

.globe-glow {
background: rgba(255, 0, 255, 0.3);
}

.title {
font-size: 4.5rem;
font-weight: 900;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin: 0;
letter-spacing: 4px;
text-transform: uppercase;
position: relative;
}

.title::after {
content: 'CYBERSEARCH';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(90deg, var(--secondary-color), var(--primary-color), var(--accent-color));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
z-index: -1;
opacity: 0.5;
filter: blur(3px);
}

.subtitle {
color: var(--text-secondary);
font-size: 1.125rem;
margin-top: 16px;
letter-spacing: 2px;
text-transform: uppercase;
}

/* Enhanced Search Form */
.search-form {
width: 100%;
max-width: 720px;
margin-bottom: 40px;
position: relative;
}

.search-container {
position: relative;
}

.search-glow {
position: absolute;
inset: -4px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
border-radius: 12px;
filter: blur(15px);
opacity: 0.5;
animation: pulse 2s infinite;
}

.search-wrapper {
position: relative;
display: flex;
gap: 12px;
background: rgba(10, 10, 30, 0.7);
border-radius: 12px;
padding: 4px;
backdrop-filter: blur(10px);
border: 1px solid rgba(0, 255, 255, 0.2);
transition: all 0.3s ease;
}

.search-wrapper:focus-within {
border-color: rgba(0, 255, 255, 0.5);
box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
}

.search-input {
flex: 1;
background: transparent;
border: none;
color: var(--text-primary);
font-family: 'Orbitron', monospace;
font-size: 1.125rem;
padding: 18px 24px;
border-radius: 8px;
transition: all 0.3s ease;
}

.search-input::placeholder {
color: var(--text-secondary);
}

.search-input:focus {
outline: none;
box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}

.search-button {
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
color: var(--dark-bg);
font-weight: 700;
padding: 18px 32px;
border: none;
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
font-family: 'Orbitron', monospace;
font-size: 1rem;
text-transform: uppercase;
letter-spacing: 1px;
position: relative;
overflow: hidden;
}

.search-button::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
transition: left 0.5s;
}

.search-button:hover::before {
left: 100%;
}

.search-button:hover {
transform: translateY(-2px);
box-shadow: 0 10px 20px rgba(0, 255, 255, 0.3);
}

.search-button:disabled {
opacity: 0.5;
cursor: not-allowed;
transform: none;
}

.loading-spinner {
width: 20px;
height: 20px;
border: 2px solid var(--dark-bg);
border-top: 2px solid transparent;
border-radius: 50%;
animation: spin 1s linear infinite;
display: inline-block;
margin-right: 8px;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Enhanced Results */
.results-container {
width: 100%;
max-width: 960px;
}

.results-header {
color: var(--text-secondary);
font-family: 'Orbitron', monospace;
margin-bottom: 20px;
font-size: 1.125rem;
text-transform: uppercase;
letter-spacing: 1px;
display: flex;
align-items: center;
gap: 10px;
position: relative;
}

.results-header::before {
content: '';
display: inline-block;
width: 20px;
height: 2px;
background: linear-gradient(90deg, transparent, var(--primary-color));
}

.results-header::after {
content: '';
display: inline-block;
width: 20px;
height: 2px;
background: linear-gradient(90deg, var(--primary-color), transparent);
}

.result-card {
background: var(--card-bg);
border: 1px solid rgba(0, 255, 255, 0.2);
border-radius: 12px;
padding: 24px;
margin-bottom: 20px;
backdrop-filter: blur(10px);
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}

.result-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 4px;
height: 100%;
background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
}

.result-card:hover {
transform: translateY(-5px);
box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
border-color: rgba(0, 255, 255, 0.4);
}

.result-content {
display: flex;
align-items: flex-start;
gap: 16px;
}

.result-bullet {
width: 10px;
height: 10px;
background: var(--primary-color);
border-radius: 50%;
margin-top: 8px;
animation: pulse 2s infinite;
flex-shrink: 0;
box-shadow: 0 0 10px var(--primary-color);
}

.result-info {
flex: 1;
}

.result-title {
color: var(--primary-color);
font-size: 1.25rem;
font-weight: 700;
margin-bottom: 12px;
word-break: break-all;
text-transform: uppercase;
letter-spacing: 1px;
}

.result-snippet {
color: var(--text-primary);
line-height: 1.6;
white-space: pre-wrap;
word-break: break-word;
}

.copy-button-container {
display: flex;
align-items: center;
margin-top: 16px;
}

.copy-button {
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
color: var(--dark-bg);
font-weight: 700;
padding: 10px 20px;
border: none;
border-radius: 6px;
cursor: pointer;
transition: all 0.3s ease;
font-family: 'Orbitron', monospace;
font-size: 0.875rem;
text-transform: uppercase;
letter-spacing: 1px;
position: relative;
overflow: hidden;
}

.copy-button::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
transition: left 0.5s;
}

.copy-button:hover::before {
left: 100%;
}

.copy-button:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
}

.copy-success {
color: var(--accent-color);
font-size: 0.875rem;
margin-left: 12px;
opacity: 0;
transition: opacity 0.3s ease;
font-weight: 700;
text-transform: uppercase;
letter-spacing: 1px;
}

.copy-success.show {
opacity: 1;
}

.no-results {
text-align: center;
padding: 60px 0;
}

.no-results-title {
color: var(--text-secondary);
font-size: 1.5rem;
font-family: 'Orbitron', monospace;
margin-bottom: 16px;
text-transform: uppercase;
letter-spacing: 2px;
}

.no-results-subtitle {
color: var(--text-secondary);
font-size: 1rem;
font-family: 'Orbitron', monospace;
opacity: 0.7;
}

/* Enhanced Footer */
.footer {
position: absolute;
bottom: 20px;
left: 0;
right: 0;
text-align: center;
}

.footer-text {
color: var(--text-secondary);
font-size: 0.875rem;
font-family: 'Orbitron', monospace;
text-transform: uppercase;
letter-spacing: 1px;
opacity: 0.7;
}

/* Enhanced Responsive */
@media (max-width: 768px) {
.title {
font-size: 3rem;
}

.search-wrapper {
flex-direction: column;
}

.search-button {
width: 100%;
}

.result-card {
padding: 16px;
}
}

/* Custom Scrollbar */
::-webkit-scrollbar {
width: 10px;
}

::-webkit-scrollbar-track {
background: rgba(10, 10, 30, 0.5);
}

::-webkit-scrollbar-thumb {
background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
background: linear-gradient(180deg, var(--secondary-color), var(--primary-color));
}

/* Enhanced Scanline Effect */
.scanline {
position: relative;
}

.scanline::before {
content: "";
position: absolute;
top: 0;
left: 0;
right: 0;
height: 2px;
background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.4), transparent);
animation: scanline 8s linear infinite;
pointer-events: none;
}

/* Enhanced Glitch Text */
.glitch {
animation: glitch 2.5s infinite;
}

/* Enhanced Neon Flicker */
.neon-flicker {
animation: neon-flicker 1.5s infinite;
}

/* New Elements */
.status-bar {
position: fixed;
top: 0;
left: 0;
right: 0;
background: rgba(10, 10, 30, 0.8);
padding: 8px 20px;
display: flex;
justify-content: space-between;
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 1px;
z-index: 100;
backdrop-filter: blur(10px);
border-bottom: 1px solid rgba(0, 255, 255, 0.2);
}

.system-time {
color: var(--primary-color);
}

.system-status {
color: var(--accent-color);
}

.terminal-output {
background: rgba(10, 10, 30, 0.5);
border: 1px solid rgba(0, 255, 255, 0.2);
border-radius: 8px;
padding: 16px;
margin-top: 20px;
font-family: 'Courier New', monospace;
font-size: 0.875rem;
max-height: 200px;
overflow-y: auto;
display: none;
}

.terminal-line {
margin-bottom: 8px;
color: var(--accent-color);
}

.terminal-prompt {
color: var(--primary-color);
}

.data-badge {
display: inline-block;
background: rgba(0, 255, 255, 0.1);
color: var(--primary-color);
padding: 4px 8px;
border-radius: 4px;
font-size: 0.75rem;
margin-left: 8px;
vertical-align: middle;
}

/* New Animations */
@keyframes typing {
from { width: 0 }
to { width: 100% }
}

@keyframes blink {
0%, 100% { opacity: 1 }
50% { opacity: 0 }
}

.typing-animation {
overflow: hidden;
white-space: nowrap;
animation: typing 3.5s steps(40, end), blink 1s step-end infinite;
}
</style>
</head>
<body>
<div class="bg-animation">
<div class="particles" id="particles"></div>
<div class="grid-overlay"></div>
</div>

<!-- Status Bar -->
<div class="status-bar">
<div class="system-time" id="systemTime">--:--:--</div>
<div class="system-status">SISTEM ONLINE</div>
</div>

<div class="container scanline">
<!-- Header -->
<header class="header">
<div class="logo-container">
<div class="hexagon-bg"></div>
<div class="icon">
<svg class="icon-cpu" fill="currentColor" viewBox="0 0 24 24">
<path d="M4 4h6v6H4V4zm10 0h6v6h-6V4zM4 14h6v6H4v-6zm7 0h2v2h-2v-2zm0 4h2v2h-2v-2zm4-4h2v2h-2v-2zm0 4h2v2h-2v-2z"/>
</svg>
<div class="icon-glow cpu-glow"></div>
</div>
<h1 class="title glitch">CYBERSEARCH</h1>
<div class="icon">
<svg class="icon-globe" fill="currentColor" viewBox="0 0 24 24">
<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
</svg>
<div class="icon-glow globe-glow"></div>
</div>
</div>
<p class="subtitle neon-flicker">// AKSES FRONTIER DIGITAL //</p>
</header>

<!-- Search Form -->
<form class="search-form" onsubmit="handleSearch(event)">
<div class="search-container">
<div class="search-glow"></div>
<div class="search-wrapper">
<input
type="text"
class="search-input"
id="searchInput"
placeholder="INISIASI PROTOCOL PENCARIAN..."
autocomplete="off"
required
>
<button type="submit" class="search-button" id="searchButton">
<span id="buttonText">
<svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
<path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
</svg>
SEARCH
</span>
</button>
</div>
</div>
</form>

<!-- Terminal Output -->
<div class="terminal-output" id="terminalOutput">
<div class="terminal-line"><span class="terminal-prompt">SYSTEM></span> Initializing CYBERSEARCH Engine v2.0.77</div>
<div class="terminal-line"><span class="terminal-prompt">SYSTEM></span> Neural network connection established</div>
<div class="terminal-line"><span class="terminal-prompt">SYSTEM></span> Ready for query input...</div>
</div>

<!-- Results Container -->
<div class="results-container" id="resultsContainer" style="display: none;">
<div class="results-header" id="resultsHeader"></div>
<div id="resultsList"></div>
</div>

<!-- No Results -->
<div class="no-results" id="noResults" style="display: none;">
<div class="no-results-title">TIDAK ADA DATA YANG DITEMUKAN DALAM MATRIX</div>
<div class="no-results-subtitle">COBA PARAMETER PENCARIAN YANG BERBEDA</div>
</div>

<!-- Footer -->
<footer class="footer">
<p class="footer-text">&lt; CYBERSEARCH ENGINE v2.0.77 &gt;</p>
</footer>
</div>

<script>
let isSearching = false;
let sheetData = [];

// Create particle effect
function createParticles() {
    const particlesContainer = document.getElementById('particles');
    const particleCount = 80;
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // Random size
        const size = Math.random() * 8 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Random position
        particle.style.left = `${Math.random() * 100}%`;
        
        // Random animation delay
        particle.style.animationDelay = `${Math.random() * 20}s`;
        
        // Random animation duration
        particle.style.animationDuration = `${Math.random() * 20 + 10}s`;
        
        particlesContainer.appendChild(particle);
    }
}

// Update system time
function updateSystemTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('id-ID', { hour12: false });
    document.getElementById('systemTime').textContent = timeString;
}

// Show terminal output
function showTerminalOutput() {
    const terminal = document.getElementById('terminalOutput');
    terminal.style.display = 'block';
}

// Add line to terminal
function addTerminalLine(text) {
    const terminal = document.getElementById('terminalOutput');
    const line = document.createElement('div');
    line.classList.add('terminal-line');
    line.innerHTML = `<span class="terminal-prompt">SYSTEM></span> ${text}`;
    terminal.appendChild(line);
    terminal.scrollTop = terminal.scrollHeight;
}

// Fetch data from Google Sheets when page loads
window.onload = function() {
    createParticles();
    updateSystemTime();
    setInterval(updateSystemTime, 1000);
    showTerminalOutput();
    fetchSheetData();
};

async function fetchSheetData() {
    try {
        const sheetId = '1k5U_YwloyQsad7PT_DmXobkNycJ6bsV0zhE00TLmSIg';
        const sheetName = 'REPORTAN';
        const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${sheetName}`;
        
        addTerminalLine('Fetching data from database...');
        
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const text = await response.text();
        
        // Parse the JSON response
        const json = JSON.parse(text.substring(47).slice(0, -2));
        
        // Extract data from the response
        const rows = json.table.rows;
        sheetData = [];
        
        // Skip header row (A1 and B1)
        for (let i = 1; i < rows.length; i++) {
            const titleCell = rows[i].c[0];
            const infoCell = rows[i].c[1];
            
            // Ensure cells are not null or undefined before accessing 'v'
            const title = titleCell && titleCell.v ? String(titleCell.v) : '';
            const info = infoCell && infoCell.v ? String(infoCell.v) : '';
            
            if (title) { // Only add rows that have a title (keyword)
                sheetData.push({ title: title.trim(), info: info.trim() });
            }
        }
        
        addTerminalLine(`Database loaded: ${sheetData.length} entries indexed`);
        console.log('Data loaded successfully:', sheetData.length, 'entries.');
    } catch (error) {
        console.error('Error fetching sheet data:', error);
        addTerminalLine(`ERROR: Failed to load database - ${error.message}`);
        
        // Optionally, show an error message to the user on the page
        const noResults = document.getElementById('noResults');
        noResults.querySelector('.no-results-title').textContent = 'GAGAL MEMUAT DATA';
        noResults.querySelector('.no-results-subtitle').textContent = 'Periksa koneksi internet atau link Google Sheets.';
        noResults.style.display = 'block';
    }
}

async function handleSearch(event) {
    event.preventDefault();

    if (isSearching) return;

    const query = document.getElementById('searchInput').value.trim();
    if (!query) return;

    isSearching = true;
    updateSearchButton(true);
    hideResults();
    
    addTerminalLine(`Executing search query: "${query}"`);

    try {
        // Search for partial match in sheet data
        const results = searchSheetData(query);
        
        addTerminalLine(`Search completed: ${results.length} results found`);
        
        if (results.length > 0) {
            displayResults(results, query);
        } else {
            showNoResults();
        }
    } catch (error) {
        console.error('Search failed:', error);
        addTerminalLine(`ERROR: Search failed - ${error.message}`);
        showNoResults();
    } finally {
        isSearching = false;
        updateSearchButton(false);
    }
}

function searchSheetData(query) {
    // Ubah query menjadi array kata-kata yang sudah di lowercase
    const queryWords = query.toLowerCase().split(' ');

    // Filter data dari sheet
    const results = sheetData.filter(item => {
        // Ubah judul dari sheet menjadi lowercase
        const title = item.title.toLowerCase();

        // Periksa apakah SALAH SATU kata dari query ada di dalam judul
        // .some() akan berhenti dan mengembalikan true segera setelah ada kecocokan
        return queryWords.some(queryWord => title.includes(queryWord));
    });
    
    return results;
}

function updateSearchButton(searching) {
    const button = document.getElementById('searchButton');
    const buttonText = document.getElementById('buttonText');

    if (searching) {
        button.disabled = true;
        buttonText.innerHTML = '<div class="loading-spinner"></div>SCANNING...';
    } else {
        button.disabled = false;
        buttonText.innerHTML = `
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
            <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        SEARCH
        `;
    }
}

function hideResults() {
    document.getElementById('resultsContainer').style.display = 'none';
    document.getElementById('noResults').style.display = 'none';
}

function displayResults(results, query) {
    const container = document.getElementById('resultsContainer');
    const header = document.getElementById('resultsHeader');
    const list = document.getElementById('resultsList');

    header.innerHTML = `MENEMUKAN ${results.length} HASIL UNTUK "${query.toUpperCase()}" <span class="data-badge">${new Date().toLocaleTimeString('id-ID')}</span>`;

    list.innerHTML = results.map((result, index) => `
        <div class="result-card">
            <div class="result-content">
                <div class="result-bullet"></div>
                <div class="result-info">
                    <h3 class="result-title">${result.title}</h3>
                    <div class="result-snippet">${result.info}</div>
                    <div class="copy-button-container">
                        <button class="copy-button" data-info="${encodeURIComponent(result.info)}" data-index="${index}">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            SALIN
                        </button>
                        <span id="copySuccess${index}" class="copy-success">Tersalin!</span>
                    </div>
                </div>
            </div>
        </div>
    `).join('');

    // Add event listeners to all copy buttons
    list.querySelectorAll('.copy-button').forEach(button => {
        button.addEventListener('click', function() {
            const info = decodeURIComponent(this.dataset.info);
            const index = this.dataset.index;
            copyToClipboard(info, index);
        });
    });

    container.style.display = 'block';
}

function copyToClipboard(text, index) {
    navigator.clipboard.writeText(text).then(() => {
        // Show success message
        const successElement = document.getElementById(`copySuccess${index}`);
        successElement.classList.add('show');
        
        // Add to terminal
        addTerminalLine(`Data copied to clipboard: ${text.substring(0, 50)}${text.length > 50 ? '...' : ''}`);
        
        // Hide success message after 2 seconds
        setTimeout(() => {
            successElement.classList.remove('show');
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Gagal menyalin teks. Silakan salin secara manual.');
    });
}

function showNoResults() {
    document.getElementById('noResults').style.display = 'block';
}
</script>
</body>
</html>
